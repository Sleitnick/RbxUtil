<!doctype html>
<html lang="en" dir="ltr" class="plugin-moonwave plugin-id-moonwave" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Shake | RbxUtil</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Sleitnick.github.io/RbxUtil/api/Shake"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Shake | RbxUtil"><meta data-rh="true" name="description" content="Create realistic shake effects, such as camera or object shakes.

Creating a shake is very simple with this module. For every shake,
simply create a shake instance by calling `Shake.new()`. From
there, configure the shake however desired. Once configured,
call `shake:Start()` and then bind a function to it with either
`shake:OnSignal(...)` or `shake:BindToRenderStep(...)`.

The shake will output its values to the connected function, and then
automatically stop and clean up its connections once completed.

Shake instances can be reused indefinitely. However, only one shake
operation per instance can be running. If more than one is needed
of the same configuration, simply call `shake:Clone()` to duplicate
it.

Example of a simple camera shake:
```lua
local priority = Enum.RenderPriority.Last.Value

local shake = Shake.new()
shake.FadeInTime = 0
shake.Frequency = 0.1
shake.Amplitude = 5
shake.RotationInfluence = Vector3.new(0.1, 0.1, 0.1)

shake:Start()
shake:BindToRenderStep(Shake.NextRenderName(), priority, function(pos, rot, isDone)
	camera.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)
end)
```

Shakes will automatically stop once the shake has been completed. Shakes can
also be used continuously if the `Sustain` property is set to `true`.

## Fixing drift

If you are not controlling the initial CFrame of the camera (i.e. using Roblox&#x27;s camera scripts),
then you might run into odd behavior with the above example. This is because Roblox&#x27;s camera
scripts are influenced by the current CFrame value of the camera. Thus, the shake effect causes
odd side-effects, especially noticeable at higher FPS.

The solution is to simply store the camera&#x27;s CFrame before applying the shake CFrame, and then
reapplying this stored CFrame value after rendering is complete (e.g. on Heartbeat).

```lua
local camCf: CFrame

shake:BindToRenderStep(Shake.NextRenderName(), priority, function(pos, rot, isDone)
	-- Store the CFrame value that was set from Roblox&#x27;s camera scripts:
	camCf = camera.CFrame

	camera.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)
end)

RunService.Heartbeat:Connect(function()
	-- Reapply the camera script CFrame before they run again.
	-- Heartbeat runs AFTER Roblox has rendered, so it will not affect the camera this frame.
	camera.CFrame = camCf
end)
```

## Configuration

Here are some more helpful configuration examples:

```lua
local shake = Shake.new()

-- The magnitude of the shake. Larger numbers means larger shakes.
shake.Amplitude = 5

-- The speed of the shake. Smaller frequencies mean faster shakes.
shake.Frequency = 0.1

 -- Fade-in time before max amplitude shake. Set to 0 for immediate shake.
shake.FadeInTime = 0

-- Fade-out time. Set to 0 for immediate cutoff.
shake.FadeOutTime = 0

-- How long the shake sustains full amplitude before fading out
shake.SustainTime = 1

-- Set to true to never end the shake. Call shake:StopSustain() to start the fade-out.
shake.Sustain = true

-- Multiplies against the shake vector to control the final amplitude of the position.
-- Can be seen internally as: position = shakeVector * fadeInOut * positionInfluence
shake.PositionInfluence = Vector3.one

-- Multiplies against the shake vector to control the final amplitude of the rotation.
-- Can be seen internally as: position = shakeVector * fadeInOut * rotationInfluence
shake.RotationInfluence = Vector3.new(0.1, 0.1, 0.1)

```"><meta data-rh="true" property="og:description" content="Create realistic shake effects, such as camera or object shakes.

Creating a shake is very simple with this module. For every shake,
simply create a shake instance by calling `Shake.new()`. From
there, configure the shake however desired. Once configured,
call `shake:Start()` and then bind a function to it with either
`shake:OnSignal(...)` or `shake:BindToRenderStep(...)`.

The shake will output its values to the connected function, and then
automatically stop and clean up its connections once completed.

Shake instances can be reused indefinitely. However, only one shake
operation per instance can be running. If more than one is needed
of the same configuration, simply call `shake:Clone()` to duplicate
it.

Example of a simple camera shake:
```lua
local priority = Enum.RenderPriority.Last.Value

local shake = Shake.new()
shake.FadeInTime = 0
shake.Frequency = 0.1
shake.Amplitude = 5
shake.RotationInfluence = Vector3.new(0.1, 0.1, 0.1)

shake:Start()
shake:BindToRenderStep(Shake.NextRenderName(), priority, function(pos, rot, isDone)
	camera.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)
end)
```

Shakes will automatically stop once the shake has been completed. Shakes can
also be used continuously if the `Sustain` property is set to `true`.

## Fixing drift

If you are not controlling the initial CFrame of the camera (i.e. using Roblox&#x27;s camera scripts),
then you might run into odd behavior with the above example. This is because Roblox&#x27;s camera
scripts are influenced by the current CFrame value of the camera. Thus, the shake effect causes
odd side-effects, especially noticeable at higher FPS.

The solution is to simply store the camera&#x27;s CFrame before applying the shake CFrame, and then
reapplying this stored CFrame value after rendering is complete (e.g. on Heartbeat).

```lua
local camCf: CFrame

shake:BindToRenderStep(Shake.NextRenderName(), priority, function(pos, rot, isDone)
	-- Store the CFrame value that was set from Roblox&#x27;s camera scripts:
	camCf = camera.CFrame

	camera.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)
end)

RunService.Heartbeat:Connect(function()
	-- Reapply the camera script CFrame before they run again.
	-- Heartbeat runs AFTER Roblox has rendered, so it will not affect the camera this frame.
	camera.CFrame = camCf
end)
```

## Configuration

Here are some more helpful configuration examples:

```lua
local shake = Shake.new()

-- The magnitude of the shake. Larger numbers means larger shakes.
shake.Amplitude = 5

-- The speed of the shake. Smaller frequencies mean faster shakes.
shake.Frequency = 0.1

 -- Fade-in time before max amplitude shake. Set to 0 for immediate shake.
shake.FadeInTime = 0

-- Fade-out time. Set to 0 for immediate cutoff.
shake.FadeOutTime = 0

-- How long the shake sustains full amplitude before fading out
shake.SustainTime = 1

-- Set to true to never end the shake. Call shake:StopSustain() to start the fade-out.
shake.Sustain = true

-- Multiplies against the shake vector to control the final amplitude of the position.
-- Can be seen internally as: position = shakeVector * fadeInOut * positionInfluence
shake.PositionInfluence = Vector3.one

-- Multiplies against the shake vector to control the final amplitude of the rotation.
-- Can be seen internally as: position = shakeVector * fadeInOut * rotationInfluence
shake.RotationInfluence = Vector3.new(0.1, 0.1, 0.1)

```"><link data-rh="true" rel="canonical" href="https://Sleitnick.github.io/RbxUtil/api/Shake"><link data-rh="true" rel="alternate" href="https://Sleitnick.github.io/RbxUtil/api/Shake" hreflang="en"><link data-rh="true" rel="alternate" href="https://Sleitnick.github.io/RbxUtil/api/Shake" hreflang="x-default"><link rel="stylesheet" href="/RbxUtil/assets/css/styles.5cbed574.css">
<script src="/RbxUtil/assets/js/runtime~main.cd50fb24.js" defer="defer"></script>
<script src="/RbxUtil/assets/js/main.fa710f1d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/RbxUtil/"><b class="navbar__title text--truncate">RbxUtil</b></a><a class="navbar__item navbar__link" href="/RbxUtil/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/RbxUtil/api/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Sleitnick/RbxUtil" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docPageContainer_wNNk"><div class="docPage_Dpn1"><div class="docSidebarContainer_o_re"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/RbxUtil/api/BufferUtil">BufferUtil</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/RbxUtil/api/Input">Input</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/RbxUtil/api/Comm">Remote Comm</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Component">​Component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Concur">​Concur</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/EnumList">​Enum​List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Find">​Find</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Loader">​Loader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Log">​Log</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Net">​Net</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Option">​Option</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/PID">​P​I​D</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Quaternion">​Quaternion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Sequent">​Sequent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Ser">​Ser</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/RbxUtil/api/Shake">​Shake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Signal">​Signal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Silo">​Silo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Spring">​Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Streamable">​Streamable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/StreamableUtil">​Streamable​Util</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Symbol">​Symbol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/TableUtil">​Table​Util</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/TaskQueue">​Task​Queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Timer">​Timer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Tree">​Tree</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/Trove">​Trove</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/TypedRemote">​Typed​Remote</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/RbxUtil/api/WaitFor">​Wait​For</a></li></ul></nav></div></div><main class="docMainContainer_HJE1"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_MU3C"><div class="docItemContainer_Wv98"><article><div class="member_J0w1 markdown"><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_oUs_"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><header><h1 class="docTitle_mZRt" style="text-decoration:none"><span style="display:inline-block">Shake</span></h1><div class="luaClassTags_EipM"></div><div>
<p>Create realistic shake effects, such as camera or object shakes.</p>
<p>
  Creating a shake is very simple with this module. For every shake,
  simply create a shake instance by calling <code>Shake.new()</code>. From
  there, configure the shake however desired. Once configured,
  call <code>shake:Start()</code> and then bind a function to it with either
  <code>shake:OnSignal(...)</code> or <code>shake:BindToRenderStep(...)</code>.
</p>
<p>
  The shake will output its values to the connected function, and then
  automatically stop and clean up its connections once completed.
</p>
<p>
  Shake instances can be reused indefinitely. However, only one shake
  operation per instance can be running. If more than one is needed
  of the same configuration, simply call <code>shake:Clone()</code> to duplicate
  it.
</p>
<p>Example of a simple camera shake:</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> priority <span class="token operator">=</span> Enum<span class="token punctuation">.</span>RenderPriority<span class="token punctuation">.</span>Last<span class="token punctuation">.</span>Value

<span class="token keyword">local</span> shake <span class="token operator">=</span> Shake<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
shake<span class="token punctuation">.</span>FadeInTime <span class="token operator">=</span> <span class="token number">0</span>
shake<span class="token punctuation">.</span>Frequency <span class="token operator">=</span> <span class="token number">0.1</span>
shake<span class="token punctuation">.</span>Amplitude <span class="token operator">=</span> <span class="token number">5</span>
shake<span class="token punctuation">.</span>RotationInfluence <span class="token operator">=</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span>

shake<span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
shake<span class="token punctuation">:</span><span class="token function">BindToRenderStep</span><span class="token punctuation">(</span>Shake<span class="token punctuation">.</span><span class="token function">NextRenderName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> priority<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> rot<span class="token punctuation">,</span> isDone<span class="token punctuation">)</span>
	camera<span class="token punctuation">.</span>CFrame <span class="token operator">*</span><span class="token operator">=</span> CFrame<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token operator">*</span> CFrame<span class="token punctuation">.</span><span class="token function">Angles</span><span class="token punctuation">(</span>rot<span class="token punctuation">.</span>X<span class="token punctuation">,</span> rot<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> rot<span class="token punctuation">.</span>Z<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
<p>
  Shakes will automatically stop once the shake has been completed. Shakes can
  also be used continuously if the <code>Sustain</code> property is set to <code>true</code>.
</p>
<h2>Fixing drift</h2>
<p>
  If you are not controlling the initial CFrame of the camera (i.e. using Roblox's camera scripts),
  then you might run into odd behavior with the above example. This is because Roblox's camera
  scripts are influenced by the current CFrame value of the camera. Thus, the shake effect causes
  odd side-effects, especially noticeable at higher FPS.
</p>
<p>
  The solution is to simply store the camera's CFrame before applying the shake CFrame, and then
  reapplying this stored CFrame value after rendering is complete (e.g. on Heartbeat).
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> camCf<span class="token punctuation">:</span> CFrame

shake<span class="token punctuation">:</span><span class="token function">BindToRenderStep</span><span class="token punctuation">(</span>Shake<span class="token punctuation">.</span><span class="token function">NextRenderName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> priority<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> rot<span class="token punctuation">,</span> isDone<span class="token punctuation">)</span>
	<span class="token comment">-- Store the CFrame value that was set from Roblox's camera scripts:</span>
	camCf <span class="token operator">=</span> camera<span class="token punctuation">.</span>CFrame

	camera<span class="token punctuation">.</span>CFrame <span class="token operator">*</span><span class="token operator">=</span> CFrame<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token operator">*</span> CFrame<span class="token punctuation">.</span><span class="token function">Angles</span><span class="token punctuation">(</span>rot<span class="token punctuation">.</span>X<span class="token punctuation">,</span> rot<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> rot<span class="token punctuation">.</span>Z<span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

RunService<span class="token punctuation">.</span>Heartbeat<span class="token punctuation">:</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">-- Reapply the camera script CFrame before they run again.</span>
	<span class="token comment">-- Heartbeat runs AFTER Roblox has rendered, so it will not affect the camera this frame.</span>
	camera<span class="token punctuation">.</span>CFrame <span class="token operator">=</span> camCf
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
<h2>Configuration</h2>
<p>Here are some more helpful configuration examples:</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> shake <span class="token operator">=</span> Shake<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">-- The magnitude of the shake. Larger numbers means larger shakes.</span>
shake<span class="token punctuation">.</span>Amplitude <span class="token operator">=</span> <span class="token number">5</span>

<span class="token comment">-- The speed of the shake. Smaller frequencies mean faster shakes.</span>
shake<span class="token punctuation">.</span>Frequency <span class="token operator">=</span> <span class="token number">0.1</span>

 <span class="token comment">-- Fade-in time before max amplitude shake. Set to 0 for immediate shake.</span>
shake<span class="token punctuation">.</span>FadeInTime <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">-- Fade-out time. Set to 0 for immediate cutoff.</span>
shake<span class="token punctuation">.</span>FadeOutTime <span class="token operator">=</span> <span class="token number">0</span>

<span class="token comment">-- How long the shake sustains full amplitude before fading out</span>
shake<span class="token punctuation">.</span>SustainTime <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">-- Set to true to never end the shake. Call shake:StopSustain() to start the fade-out.</span>
shake<span class="token punctuation">.</span>Sustain <span class="token operator">=</span> <span class="token keyword">true</span>

<span class="token comment">-- Multiplies against the shake vector to control the final amplitude of the position.</span>
<span class="token comment">-- Can be seen internally as: position = shakeVector * fadeInOut * positionInfluence</span>
shake<span class="token punctuation">.</span>PositionInfluence <span class="token operator">=</span> Vector3<span class="token punctuation">.</span>one

<span class="token comment">-- Multiplies against the shake vector to control the final amplitude of the rotation.</span>
<span class="token comment">-- Can be seen internally as: position = shakeVector * fadeInOut * rotationInfluence</span>
shake<span class="token punctuation">.</span>RotationInfluence <span class="token operator">=</span> Vector3<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span>

</code></pre>
</div></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="types">Types<a href="#types" class="hash-link" aria-label="Direct link to Types" title="Direct link to Types">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="UpdateCallbackFn"><code style="text-decoration:none">UpdateCallbackFn</code><a href="#UpdateCallbackFn" class="hash-link" aria-label="Direct link to UpdateCallbackFn" title="Direct link to UpdateCallbackFn">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L9"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="purple_ieR2">type</code> <code>UpdateCallbackFn<!-- --> = </code> <code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><div class="inset_uKQm"><code>position<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>rotation<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code>completed<!-- -->: </code><code class="blue_P4bS">boolean</code></div><code class="purple_ieR2">)</code></div><div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Amplitude"><code style="text-decoration:none">Amplitude</code><a href="#Amplitude" class="hash-link" aria-label="Direct link to Amplitude" title="Direct link to Amplitude">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L150"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->Amplitude<!-- -->:<!-- --> </code> <code class="blue_P4bS">number</code></div><div>
<p>
  Amplitude of the overall shake. For instance, an amplitude of <code>3</code> would mean the
  peak magnitude for the outputted shake vectors would be about <code>3</code>.
</p>
<p>Defaults to <code>1</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Frequency"><code style="text-decoration:none">Frequency</code><a href="#Frequency" class="hash-link" aria-label="Direct link to Frequency" title="Direct link to Frequency">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L159"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->Frequency<!-- -->:<!-- --> </code> <code class="blue_P4bS">number</code></div><div>
<p>
  Frequency of the overall shake. This changes how slow or fast the
  shake occurs.
</p>
<p>Defaults to <code>1</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="FadeInTime"><code style="text-decoration:none">FadeInTime</code><a href="#FadeInTime" class="hash-link" aria-label="Direct link to FadeInTime" title="Direct link to FadeInTime">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L167"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->FadeInTime<!-- -->:<!-- --> </code> <code class="blue_P4bS">number</code></div><div>
<p>How long it takes for the shake to fade in, measured in seconds.</p>
<p>Defaults to <code>1</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="FadeOutTime"><code style="text-decoration:none">FadeOutTime</code><a href="#FadeOutTime" class="hash-link" aria-label="Direct link to FadeOutTime" title="Direct link to FadeOutTime">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L175"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->FadeOutTime<!-- -->:<!-- --> </code> <code class="blue_P4bS">number</code></div><div>
<p>How long it takes for the shake to fade out, measured in seconds.</p>
<p>Defaults to <code>1</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="SustainTime"><code style="text-decoration:none">SustainTime</code><a href="#SustainTime" class="hash-link" aria-label="Direct link to SustainTime" title="Direct link to SustainTime">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L188"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->SustainTime<!-- -->:<!-- --> </code> <code class="blue_P4bS">number</code></div><div>
<p>
  How long it takes for the shake sustains itself after fading in and
  before fading out.
</p>
<p>
  To sustain a shake indefinitely, set <code>Sustain</code>
  to <code>true</code>, and call the <code>StopSustain()</code> method to stop the sustain
  and fade out the shake effect.
</p>
<p>Defaults to <code>0</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Sustain"><code style="text-decoration:none">Sustain</code><a href="#Sustain" class="hash-link" aria-label="Direct link to Sustain" title="Direct link to Sustain">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L198"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->Sustain<!-- -->:<!-- --> </code> <code class="blue_P4bS">boolean</code></div><div>
<p>
  If <code>true</code>, the shake will sustain itself indefinitely once it fades
  in. If <code>StopSustain()</code> is called, the sustain will end and the shake
  will fade out based on the <code>FadeOutTime</code>.
</p>
<p>Defaults to <code>false</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="PositionInfluence"><code style="text-decoration:none">PositionInfluence</code><a href="#PositionInfluence" class="hash-link" aria-label="Direct link to PositionInfluence" title="Direct link to PositionInfluence">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L207"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->PositionInfluence<!-- -->:<!-- --> </code> <code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code></div><div>
<p>
  This is similar to <code>Amplitude</code> but multiplies against each axis
  of the resultant shake vector, and only affects the position vector.
</p>
<p>Defaults to <code>Vector3.one</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="RotationInfluence"><code style="text-decoration:none">RotationInfluence</code><a href="#RotationInfluence" class="hash-link" aria-label="Direct link to RotationInfluence" title="Direct link to RotationInfluence">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L216"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->RotationInfluence<!-- -->:<!-- --> </code> <code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code></div><div>
<p>
  This is similar to <code>Amplitude</code> but multiplies against each axis
  of the resultant shake vector, and only affects the rotation vector.
</p>
<p>Defaults to <code>Vector3.one</code>.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="TimeFunction"><code style="text-decoration:none">TimeFunction</code><a href="#TimeFunction" class="hash-link" aria-label="Direct link to TimeFunction" title="Direct link to TimeFunction">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L225"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.<!-- -->TimeFunction<!-- -->:<!-- --> </code> <code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="blue_P4bS">number</code></div><div>
<p>
  The function used to get the current time. This defaults to
  <code>time</code> during runtime, and <code>os.clock</code> otherwise. Usually this
  will not need to be set, but it can be optionally configured
  if desired.
</p>
</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a href="#functions" class="hash-link" aria-label="Direct link to Functions" title="Direct link to Functions">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new"><code style="text-decoration:none">new</code><a href="#new" class="hash-link" aria-label="Direct link to new" title="Direct link to new">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L230"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.</code><code class="green_DgR4">new</code><code>(</code><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/RbxUtil/api/Shake">Shake</a></code></div><div>
<p>Construct a new Shake instance.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="InverseSquare"><code style="text-decoration:none">InverseSquare</code><a href="#InverseSquare" class="hash-link" aria-label="Direct link to InverseSquare" title="Direct link to InverseSquare">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L281"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.</code><code class="green_DgR4">InverseSquare</code><code>(</code><div class="inset_uKQm"><div><code>shake<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code><code>,</code></div><div><code>distance<!-- -->: </code><code class="blue_P4bS">number</code></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code></div><div>
<p>
  Apply an inverse square intensity multiplier to the given vector based on the
  distance away from some source. This can be used to simulate shake intensity
  based on the distance the shake is occurring from some source.
</p>
<p>
  For instance, if the shake is caused by an explosion in the game, the shake
  can be calculated as such:
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">Explosion</span><span class="token punctuation">(</span>positionOfExplosion<span class="token punctuation">:</span> Vector3<span class="token punctuation">)</span>

	<span class="token keyword">local</span> cam <span class="token operator">=</span> workspace<span class="token punctuation">.</span>CurrentCamera
	<span class="token keyword">local</span> renderPriority <span class="token operator">=</span> Enum<span class="token punctuation">.</span>RenderPriority<span class="token punctuation">.</span>Last<span class="token punctuation">.</span>Value

	<span class="token keyword">local</span> shake <span class="token operator">=</span> Shake<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">-- Set shake properties here</span>

	<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">ExplosionShake</span><span class="token punctuation">(</span>pos<span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> rot<span class="token punctuation">:</span> Vector3<span class="token punctuation">)</span>
		<span class="token keyword">local</span> distance <span class="token operator">=</span> <span class="token punctuation">(</span>cam<span class="token punctuation">.</span>CFrame<span class="token punctuation">.</span>Position <span class="token operator">-</span> positionOfExplosion<span class="token punctuation">)</span><span class="token punctuation">.</span>Magnitude
		pos <span class="token operator">=</span> Shake<span class="token punctuation">.</span><span class="token function">InverseSquare</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> distance<span class="token punctuation">)</span>
		rot <span class="token operator">=</span> Shake<span class="token punctuation">.</span><span class="token function">InverseSquare</span><span class="token punctuation">(</span>rot<span class="token punctuation">,</span> distance<span class="token punctuation">)</span>
		cam<span class="token punctuation">.</span>CFrame <span class="token operator">*</span><span class="token operator">=</span> CFrame<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span> <span class="token operator">*</span> CFrame<span class="token punctuation">.</span><span class="token function">Angles</span><span class="token punctuation">(</span>rot<span class="token punctuation">.</span>X<span class="token punctuation">,</span> rot<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> rot<span class="token punctuation">.</span>Z<span class="token punctuation">)</span>
	<span class="token keyword">end</span>

	shake<span class="token punctuation">:</span><span class="token function">BindToRenderStep</span><span class="token punctuation">(</span><span class="token string">"ExplosionShake"</span><span class="token punctuation">,</span> renderPriority<span class="token punctuation">,</span> ExplosionShake<span class="token punctuation">)</span>

<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="NextRenderName"><code style="text-decoration:none">NextRenderName</code><a href="#NextRenderName" class="hash-link" aria-label="Direct link to NextRenderName" title="Direct link to NextRenderName">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L297"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->.</code><code class="green_DgR4">NextRenderName</code><code>(</code><code>) → </code><code class="blue_P4bS">string</code></div><div>
<p>
  Returns a unique render name for every call, which can
  be used with the <code>BindToRenderStep</code> method optionally.
</p>
<pre class="language-lua"><code class="language-lua">shake<span class="token punctuation">:</span><span class="token function">BindToRenderStep</span><span class="token punctuation">(</span>Shake<span class="token punctuation">.</span><span class="token function">NextRenderName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">...</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Start"><code style="text-decoration:none">Start</code><a href="#Start" class="hash-link" aria-label="Direct link to Start" title="Direct link to Start">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L310"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">Start</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>Start the shake effect.</p>

  
    
    
      <div class="admonition admonition-note alert alert--secondary">
        <div class="admonition-heading">
          <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
                <path d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path>
              </svg></span><span class="admonition-title">NOTE</span></h5>
        </div>
        <div class="admonition-content">
          <p>
            This <strong>must</strong> be called before calling <code>Update</code>. As such, it should also be
            called once before or after calling <code>OnSignal</code> or <code>BindToRenderStep</code> methods.
          </p>
        </div>
      </div>
    
  

</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Stop"><code style="text-decoration:none">Stop</code><a href="#Stop" class="hash-link" aria-label="Direct link to Stop" title="Direct link to Stop">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L322"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">Stop</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Stops the shake effect. If using <code>OnSignal</code> or <code>BindToRenderStep</code>, those bound
  functions will be disconnected/unbound.
</p>
<p>
  <code>Stop</code> is automatically called when the shake effect is completed <em>or</em> when the
  <code>Destroy</code> method is called.
</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="IsShaking"><code style="text-decoration:none">IsShaking</code><a href="#IsShaking" class="hash-link" aria-label="Direct link to IsShaking" title="Direct link to IsShaking">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L340"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">IsShaking</code><code>(</code><code>) → </code><code class="blue_P4bS">boolean</code></div><div>
<p>
  Returns <code>true</code> if the shake instance is currently running,
  otherwise returns <code>false</code>.
</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="StopSustain"><code style="text-decoration:none">StopSustain</code><a href="#StopSustain" class="hash-link" aria-label="Direct link to StopSustain" title="Direct link to StopSustain">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L349"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">StopSustain</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Schedules a sustained shake to stop. This works by setting the
  <code>Sustain</code> field to <code>false</code> and letting the shake effect fade out
  based on the <code>FadeOutTime</code> field.
</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Update"><code style="text-decoration:none">Update</code><a href="#Update" class="hash-link" aria-label="Direct link to Update" title="Direct link to Update">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L377"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">Update</code><code>(</code><code>) → </code><code>(</code><div class="inset_uKQm"><div><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code><code>,</code></div><div><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/Vector3" target="_blank" rel="noopener noreferrer">Vector3<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code><code>,</code></div><div><code class="blue_P4bS">boolean</code></div></div><code>)</code></div><div>
<p>
  Calculates the current shake vector. This should be continuously
  called inside a loop, such as <code>RunService.Heartbeat</code>. Alternatively,
  <code>OnSignal</code> or <code>BindToRenderStep</code> can be used to automatically call
  this function.
</p>
<p>Returns a tuple of three values:</p>
<ol>
  <li><code>position: Vector3</code> - Position shake offset</li>
  <li><code>rotation: Vector3</code> - Rotation shake offset</li>
  <li><code>completed: boolean</code> - Flag indicating if the shake is finished</li>
</ol>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> hb
hb <span class="token operator">=</span> RunService<span class="token punctuation">.</span>Heartbeat<span class="token punctuation">:</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">local</span> offsetPosition<span class="token punctuation">,</span> offsetRotation<span class="token punctuation">,</span> isDone <span class="token operator">=</span> shake<span class="token punctuation">:</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> isDone <span class="token keyword">then</span>
		hb<span class="token punctuation">:</span><span class="token function">Disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
	<span class="token comment">-- Use `offsetPosition` and `offsetRotation` here</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="OnSignal"><code style="text-decoration:none">OnSignal</code><a href="#OnSignal" class="hash-link" aria-label="Direct link to OnSignal" title="Direct link to OnSignal">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L435"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">OnSignal</code><code>(</code><div class="inset_uKQm"><div><code>signal<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/RbxUtil/api/Signal">Signal</a></code><code class="op_lSLc"> | </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/RBXScriptSignal" target="_blank" rel="noopener noreferrer">RBXScriptSignal<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code><code>,</code></div><div><code>callbackFn<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/RbxUtil/api/Shake#UpdateCallbackFn">UpdateCallbackFn</a></code></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/RbxUtil/api/RemoteSignal#Connection">Connection</a></code><code class="op_lSLc"> | </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="https://developer.roblox.com/en-us/api-reference/datatype/RBXScriptConnection" target="_blank" rel="noopener noreferrer">RBXScriptConnection<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" style="color:gray;vertical-align:middle;margin-left:2px"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></code></div><div>
<p>
  Bind the <code>Update</code> method to a signal. For instance, this can be used
  to connect to <code>RunService.Heartbeat</code>.
</p>
<p>
  All connections are cleaned up when the shake instance is stopped
  or destroyed.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">SomeShake</span><span class="token punctuation">(</span>pos<span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> rot<span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> completed<span class="token punctuation">:</span> boolean<span class="token punctuation">)</span>
	<span class="token comment">-- Shake</span>
<span class="token keyword">end</span>

shake<span class="token punctuation">:</span><span class="token function">OnSignal</span><span class="token punctuation">(</span>RunService<span class="token punctuation">.</span>Heartbeat<span class="token punctuation">,</span> SomeShake<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="BindToRenderStep"><code style="text-decoration:none">BindToRenderStep</code><a href="#BindToRenderStep" class="hash-link" aria-label="Direct link to BindToRenderStep" title="Direct link to BindToRenderStep">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L465"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">BindToRenderStep</code><code>(</code><div class="inset_uKQm"><div><code>name<!-- -->: </code><code class="blue_P4bS">string</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>Name passed to <code>RunService:BindToRenderStep</code></p>
</span></span></div><div><code>priority<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>Priority passed to <code>RunService:BindToRenderStep</code></p>
</span></span></div><div><code>callbackFn<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/RbxUtil/api/Shake#UpdateCallbackFn">UpdateCallbackFn</a></code></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Bind the <code>Update</code> method to RenderStep.</p>
<p>
  All bound functions are cleaned up when the shake instance is stopped
  or destroyed.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> renderPriority <span class="token operator">=</span> Enum<span class="token punctuation">.</span>RenderPriority<span class="token punctuation">.</span>Camera<span class="token punctuation">.</span>Value

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">SomeShake</span><span class="token punctuation">(</span>pos<span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> rot<span class="token punctuation">:</span> Vector3<span class="token punctuation">,</span> completed<span class="token punctuation">:</span> boolean<span class="token punctuation">)</span>
	<span class="token comment">-- Shake</span>
<span class="token keyword">end</span>

shake<span class="token punctuation">:</span><span class="token function">BindToRenderStep</span><span class="token punctuation">(</span><span class="token string">"SomeShake"</span><span class="token punctuation">,</span> renderPriority<span class="token punctuation">,</span> SomeShake<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Clone"><code style="text-decoration:none">Clone</code><a href="#Clone" class="hash-link" aria-label="Direct link to Clone" title="Direct link to Clone">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L502"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">Clone</code><code>(</code><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/RbxUtil/api/Shake">Shake</a></code></div><div>
<p>
  Creates a new shake with identical properties as
  this one. This does <em>not</em> clone over playing state,
  and thus the cloned instance will be in a stopped
  state.
</p>
<p>
  A use-case for using <code>Clone</code> would be to create a module
  with a list of shake presets. These presets can be cloned
  when desired for use. For instance, there might be presets
  for explosions, recoil, or earthquakes.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token comment">--------------------------------------</span>
<span class="token comment">-- Example preset module</span>
<span class="token keyword">local</span> ShakePresets <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">local</span> explosion <span class="token operator">=</span> Shake<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">-- Configure `explosion` shake here</span>
ShakePresets<span class="token punctuation">.</span>Explosion <span class="token operator">=</span> explosion

<span class="token keyword">return</span> ShakePresets
<span class="token comment">--------------------------------------</span>

<span class="token comment">-- Use the module:</span>
<span class="token keyword">local</span> ShakePresets <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>somewhere<span class="token punctuation">.</span>ShakePresets<span class="token punctuation">)</span>
<span class="token keyword">local</span> explosionShake <span class="token operator">=</span> ShakePresets<span class="token punctuation">.</span>Explosion<span class="token punctuation">:</span><span class="token function">Clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="Destroy"><code style="text-decoration:none">Destroy</code><a href="#Destroy" class="hash-link" aria-label="Direct link to Destroy" title="Direct link to Destroy">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/Sleitnick/RbxUtil/blob/main/modules/shake/init.luau#L524"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>Shake<!-- -->:</code><code class="green_DgR4">Destroy</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>Alias for <code>Stop()</code>.</p>
</div></div></article></div><details><summary>Show raw api</summary><pre style="max-width:100%;white-space:pre-wrap">{
    &quot;functions&quot;: [
        {
            &quot;name&quot;: &quot;new&quot;,
            &quot;desc&quot;: &quot;Construct a new Shake instance.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Shake&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 230,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;InverseSquare&quot;,
            &quot;desc&quot;: &quot;Apply an inverse square intensity multiplier to the given vector based on the\ndistance away from some source. This can be used to simulate shake intensity\nbased on the distance the shake is occurring from some source.\n\nFor instance, if the shake is caused by an explosion in the game, the shake\ncan be calculated as such:\n\n```lua\nlocal function Explosion(positionOfExplosion: Vector3)\n\n\tlocal cam = workspace.CurrentCamera\n\tlocal renderPriority = Enum.RenderPriority.Last.Value\n\n\tlocal shake = Shake.new()\n\t-- Set shake properties here\n\n\tlocal function ExplosionShake(pos: Vector3, rot: Vector3)\n\t\tlocal distance = (cam.CFrame.Position - positionOfExplosion).Magnitude\n\t\tpos = Shake.InverseSquare(pos, distance)\n\t\trot = Shake.InverseSquare(rot, distance)\n\t\tcam.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)\n\tend\n\n\tshake:BindToRenderStep(\&quot;ExplosionShake\&quot;, renderPriority, ExplosionShake)\n\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;shake&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Vector3&quot;
                },
                {
                    &quot;name&quot;: &quot;distance&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Vector3\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 281,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;NextRenderName&quot;,
            &quot;desc&quot;: &quot;Returns a unique render name for every call, which can\nbe used with the `BindToRenderStep` method optionally.\n\n```lua\nshake:BindToRenderStep(Shake.NextRenderName(), ...)\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;string\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 297,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Start&quot;,
            &quot;desc&quot;: &quot;Start the shake effect.\n\n:::note\nThis **must** be called before calling `Update`. As such, it should also be\ncalled once before or after calling `OnSignal` or `BindToRenderStep` methods.\n:::&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 310,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Stop&quot;,
            &quot;desc&quot;: &quot;Stops the shake effect. If using `OnSignal` or `BindToRenderStep`, those bound\nfunctions will be disconnected/unbound.\n\n`Stop` is automatically called when the shake effect is completed _or_ when the\n`Destroy` method is called.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 322,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;IsShaking&quot;,
            &quot;desc&quot;: &quot;Returns `true` if the shake instance is currently running,\notherwise returns `false`.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;boolean\n&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 340,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;StopSustain&quot;,
            &quot;desc&quot;: &quot;Schedules a sustained shake to stop. This works by setting the\n`Sustain` field to `false` and letting the shake effect fade out\nbased on the `FadeOutTime` field.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 349,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Update&quot;,
            &quot;desc&quot;: &quot;Calculates the current shake vector. This should be continuously\ncalled inside a loop, such as `RunService.Heartbeat`. Alternatively,\n`OnSignal` or `BindToRenderStep` can be used to automatically call\nthis function.\n\nReturns a tuple of three values:\n1. `position: Vector3` - Position shake offset\n2. `rotation: Vector3` - Rotation shake offset\n3. `completed: boolean` - Flag indicating if the shake is finished\n\n```lua\nlocal hb\nhb = RunService.Heartbeat:Connect(function()\n\tlocal offsetPosition, offsetRotation, isDone = shake:Update()\n\tif isDone then\n\t\thb:Disconnect()\n\tend\n\t-- Use `offsetPosition` and `offsetRotation` here\nend)\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Vector3&quot;
                },
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Vector3&quot;
                },
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;boolean&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 377,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;OnSignal&quot;,
            &quot;desc&quot;: &quot;Bind the `Update` method to a signal. For instance, this can be used\nto connect to `RunService.Heartbeat`.\n\nAll connections are cleaned up when the shake instance is stopped\nor destroyed.\n\n```lua\nlocal function SomeShake(pos: Vector3, rot: Vector3, completed: boolean)\n\t-- Shake\nend\n\nshake:OnSignal(RunService.Heartbeat, SomeShake)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;signal&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Signal | RBXScriptSignal&quot;
                },
                {
                    &quot;name&quot;: &quot;callbackFn&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;UpdateCallbackFn&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Connection | RBXScriptConnection&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 435,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;BindToRenderStep&quot;,
            &quot;desc&quot;: &quot;Bind the `Update` method to RenderStep.\n\nAll bound functions are cleaned up when the shake instance is stopped\nor destroyed.\n\n```lua\nlocal renderPriority = Enum.RenderPriority.Camera.Value\n\nlocal function SomeShake(pos: Vector3, rot: Vector3, completed: boolean)\n\t-- Shake\nend\n\nshake:BindToRenderStep(\&quot;SomeShake\&quot;, renderPriority, SomeShake)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;name&quot;,
                    &quot;desc&quot;: &quot;Name passed to `RunService:BindToRenderStep`&quot;,
                    &quot;lua_type&quot;: &quot;string&quot;
                },
                {
                    &quot;name&quot;: &quot;priority&quot;,
                    &quot;desc&quot;: &quot;Priority passed to `RunService:BindToRenderStep`&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;callbackFn&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;UpdateCallbackFn&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 465,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Clone&quot;,
            &quot;desc&quot;: &quot;Creates a new shake with identical properties as\nthis one. This does _not_ clone over playing state,\nand thus the cloned instance will be in a stopped\nstate.\n\nA use-case for using `Clone` would be to create a module\nwith a list of shake presets. These presets can be cloned\nwhen desired for use. For instance, there might be presets\nfor explosions, recoil, or earthquakes.\n\n```lua\n--------------------------------------\n-- Example preset module\nlocal ShakePresets = {}\n\nlocal explosion = Shake.new()\n-- Configure `explosion` shake here\nShakePresets.Explosion = explosion\n\nreturn ShakePresets\n--------------------------------------\n\n-- Use the module:\nlocal ShakePresets = require(somewhere.ShakePresets)\nlocal explosionShake = ShakePresets.Explosion:Clone()\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;Shake&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 502,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Destroy&quot;,
            &quot;desc&quot;: &quot;Alias for `Stop()`.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 524,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        }
    ],
    &quot;properties&quot;: [
        {
            &quot;name&quot;: &quot;Amplitude&quot;,
            &quot;desc&quot;: &quot;Amplitude of the overall shake. For instance, an amplitude of `3` would mean the\npeak magnitude for the outputted shake vectors would be about `3`.\n\nDefaults to `1`.&quot;,
            &quot;lua_type&quot;: &quot;number&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 150,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Frequency&quot;,
            &quot;desc&quot;: &quot;Frequency of the overall shake. This changes how slow or fast the\nshake occurs.\n\nDefaults to `1`.&quot;,
            &quot;lua_type&quot;: &quot;number&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 159,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;FadeInTime&quot;,
            &quot;desc&quot;: &quot;How long it takes for the shake to fade in, measured in seconds.\n\nDefaults to `1`.&quot;,
            &quot;lua_type&quot;: &quot;number&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 167,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;FadeOutTime&quot;,
            &quot;desc&quot;: &quot;How long it takes for the shake to fade out, measured in seconds.\n\nDefaults to `1`.&quot;,
            &quot;lua_type&quot;: &quot;number&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 175,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;SustainTime&quot;,
            &quot;desc&quot;: &quot;How long it takes for the shake sustains itself after fading in and\nbefore fading out.\n\nTo sustain a shake indefinitely, set `Sustain`\nto `true`, and call the `StopSustain()` method to stop the sustain\nand fade out the shake effect.\n\nDefaults to `0`.&quot;,
            &quot;lua_type&quot;: &quot;number&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 188,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;Sustain&quot;,
            &quot;desc&quot;: &quot;If `true`, the shake will sustain itself indefinitely once it fades\nin. If `StopSustain()` is called, the sustain will end and the shake\nwill fade out based on the `FadeOutTime`.\n\nDefaults to `false`.&quot;,
            &quot;lua_type&quot;: &quot;boolean&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 198,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;PositionInfluence&quot;,
            &quot;desc&quot;: &quot;This is similar to `Amplitude` but multiplies against each axis\nof the resultant shake vector, and only affects the position vector.\n\nDefaults to `Vector3.one`.&quot;,
            &quot;lua_type&quot;: &quot;Vector3&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 207,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;RotationInfluence&quot;,
            &quot;desc&quot;: &quot;This is similar to `Amplitude` but multiplies against each axis\nof the resultant shake vector, and only affects the rotation vector.\n\nDefaults to `Vector3.one`.&quot;,
            &quot;lua_type&quot;: &quot;Vector3&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 216,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        },
        {
            &quot;name&quot;: &quot;TimeFunction&quot;,
            &quot;desc&quot;: &quot;The function used to get the current time. This defaults to\n`time` during runtime, and `os.clock` otherwise. Usually this\nwill not need to be set, but it can be optionally configured\nif desired.&quot;,
            &quot;lua_type&quot;: &quot;() -&gt; number&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 225,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        }
    ],
    &quot;types&quot;: [
        {
            &quot;name&quot;: &quot;UpdateCallbackFn&quot;,
            &quot;desc&quot;: &quot;&quot;,
            &quot;lua_type&quot;: &quot;() -&gt; (position: Vector3, rotation: Vector3, completed: boolean)&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 9,
                &quot;path&quot;: &quot;modules/shake/init.luau&quot;
            }
        }
    ],
    &quot;name&quot;: &quot;Shake&quot;,
    &quot;desc&quot;: &quot;Create realistic shake effects, such as camera or object shakes.\n\nCreating a shake is very simple with this module. For every shake,\nsimply create a shake instance by calling `Shake.new()`. From\nthere, configure the shake however desired. Once configured,\ncall `shake:Start()` and then bind a function to it with either\n`shake:OnSignal(...)` or `shake:BindToRenderStep(...)`.\n\nThe shake will output its values to the connected function, and then\nautomatically stop and clean up its connections once completed.\n\nShake instances can be reused indefinitely. However, only one shake\noperation per instance can be running. If more than one is needed\nof the same configuration, simply call `shake:Clone()` to duplicate\nit.\n\nExample of a simple camera shake:\n```lua\nlocal priority = Enum.RenderPriority.Last.Value\n\nlocal shake = Shake.new()\nshake.FadeInTime = 0\nshake.Frequency = 0.1\nshake.Amplitude = 5\nshake.RotationInfluence = Vector3.new(0.1, 0.1, 0.1)\n\nshake:Start()\nshake:BindToRenderStep(Shake.NextRenderName(), priority, function(pos, rot, isDone)\n\tcamera.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)\nend)\n```\n\nShakes will automatically stop once the shake has been completed. Shakes can\nalso be used continuously if the `Sustain` property is set to `true`.\n\n## Fixing drift\n\nIf you are not controlling the initial CFrame of the camera (i.e. using Roblox&#x27;s camera scripts),\nthen you might run into odd behavior with the above example. This is because Roblox&#x27;s camera\nscripts are influenced by the current CFrame value of the camera. Thus, the shake effect causes\nodd side-effects, especially noticeable at higher FPS.\n\nThe solution is to simply store the camera&#x27;s CFrame before applying the shake CFrame, and then\nreapplying this stored CFrame value after rendering is complete (e.g. on Heartbeat).\n\n```lua\nlocal camCf: CFrame\n\nshake:BindToRenderStep(Shake.NextRenderName(), priority, function(pos, rot, isDone)\n\t-- Store the CFrame value that was set from Roblox&#x27;s camera scripts:\n\tcamCf = camera.CFrame\n\n\tcamera.CFrame *= CFrame.new(pos) * CFrame.Angles(rot.X, rot.Y, rot.Z)\nend)\n\nRunService.Heartbeat:Connect(function()\n\t-- Reapply the camera script CFrame before they run again.\n\t-- Heartbeat runs AFTER Roblox has rendered, so it will not affect the camera this frame.\n\tcamera.CFrame = camCf\nend)\n```\n\n## Configuration\n\nHere are some more helpful configuration examples:\n\n```lua\nlocal shake = Shake.new()\n\n-- The magnitude of the shake. Larger numbers means larger shakes.\nshake.Amplitude = 5\n\n-- The speed of the shake. Smaller frequencies mean faster shakes.\nshake.Frequency = 0.1\n\n -- Fade-in time before max amplitude shake. Set to 0 for immediate shake.\nshake.FadeInTime = 0\n\n-- Fade-out time. Set to 0 for immediate cutoff.\nshake.FadeOutTime = 0\n\n-- How long the shake sustains full amplitude before fading out\nshake.SustainTime = 1\n\n-- Set to true to never end the shake. Call shake:StopSustain() to start the fade-out.\nshake.Sustain = true\n\n-- Multiplies against the shake vector to control the final amplitude of the position.\n-- Can be seen internally as: position = shakeVector * fadeInOut * positionInfluence\nshake.PositionInfluence = Vector3.one\n\n-- Multiplies against the shake vector to control the final amplitude of the rotation.\n-- Can be seen internally as: position = shakeVector * fadeInOut * rotationInfluence\nshake.RotationInfluence = Vector3.new(0.1, 0.1, 0.1)\n\n```&quot;,
    &quot;source&quot;: {
        &quot;line&quot;: 139,
        &quot;path&quot;: &quot;modules/shake/init.luau&quot;
    }
}</pre></details></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a><ul><li><a href="#UpdateCallbackFn" class="table-of-contents__link toc-highlight">UpdateCallbackFn</a></li></ul></li><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a><ul><li><a href="#Amplitude" class="table-of-contents__link toc-highlight">Amplitude</a></li><li><a href="#FadeInTime" class="table-of-contents__link toc-highlight">FadeInTime</a></li><li><a href="#FadeOutTime" class="table-of-contents__link toc-highlight">FadeOutTime</a></li><li><a href="#Frequency" class="table-of-contents__link toc-highlight">Frequency</a></li><li><a href="#PositionInfluence" class="table-of-contents__link toc-highlight">PositionInfluence</a></li><li><a href="#RotationInfluence" class="table-of-contents__link toc-highlight">RotationInfluence</a></li><li><a href="#Sustain" class="table-of-contents__link toc-highlight">Sustain</a></li><li><a href="#SustainTime" class="table-of-contents__link toc-highlight">SustainTime</a></li><li><a href="#TimeFunction" class="table-of-contents__link toc-highlight">TimeFunction</a></li></ul></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#BindToRenderStep" class="table-of-contents__link toc-highlight">:BindToRenderStep</a></li><li><a href="#Clone" class="table-of-contents__link toc-highlight">:Clone</a></li><li><a href="#Destroy" class="table-of-contents__link toc-highlight">:Destroy</a></li><li><a href="#IsShaking" class="table-of-contents__link toc-highlight">:IsShaking</a></li><li><a href="#OnSignal" class="table-of-contents__link toc-highlight">:OnSignal</a></li><li><a href="#Start" class="table-of-contents__link toc-highlight">:Start</a></li><li><a href="#Stop" class="table-of-contents__link toc-highlight">:Stop</a></li><li><a href="#StopSustain" class="table-of-contents__link toc-highlight">:StopSustain</a></li><li><a href="#Update" class="table-of-contents__link toc-highlight">:Update</a></li><li><a href="#InverseSquare" class="table-of-contents__link toc-highlight">.InverseSquare</a></li><li><a href="#new" class="table-of-contents__link toc-highlight">.new</a></li><li><a href="#NextRenderName" class="table-of-contents__link toc-highlight">.NextRenderName</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Sleitnick. Built with Moonwave and Docusaurus.</div></div></div></footer></div>
</body>
</html>